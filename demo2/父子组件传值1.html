<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="./vue.js"></script>
</head>
<body>
    <div id="app">
        <child :func="sendFunc"
            @myself="myselfFunc"
        ></child>

        <button @click = "getChildData">getChildData</button>
        {{childMsg}}
    </div>
    <script>    
    /*
        总结：
        子组件向父组件传递数据

        1. 在子组件中通过注册事件，向父组件来进行传递数据
            (1) this.$emit("事件名",传递的数据);

            (2) 在组件上绑定 例如Child组件
            <Child @事件名 = "回调函数"></Child>
        2. 通过向子组件上传递方法的方式，在子组件中进行触发，通过将数据传递给子组件
            <Child :func= "sentFunc">
                
    */

        Vue.component("child",{
            template:"<div>child component</div>",
            data:function(){
                return {
                    childMsg:"我是childmsg数据",
                    childMsg2:"我是childmsg2数据"
                }
            },
            props:{
                func:{
                    type:Function,
                    default:function(){console.log("default")}
                }
            },
            mounted() {
                this.func(this.childMsg2);
                this.$emit('myself', "自定义事件数据")
            },
        
        })
        var vm = new Vue({
            el:"#app",
            data:{
                msg:["aaa","bbb","ccc"],
                childMsg:""
            },
            methods:{
                getChildData(){
                   console.log(this.childMsg= this.$children[0].childMsg)
                },
                sendFunc(data){
                    console.log("我拿到的子组件的数据:"+data)
                },
                myselfFunc(data){
                    console.log("自定义事件的数据来着子组件有:"+data)
                }
            }
        })
    </script>
</body>
</html>